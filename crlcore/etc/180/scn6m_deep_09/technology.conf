# -*- Mode:Python; explicit-buffer-name: "technology.conf<scn6m_deep>" -*-

import helpers
from   Hurricane import DbU

# The informations here are extracted from the Alliance ".rds" file,
# and must be consistent with it.
#
# Provides standard settings for:
# - <viewerConfig>
# - <realLayersTable>
# - <symbolicLayersTable>
# - <workingLayersTable>

execfile( helpers.sysConfDir+'/common/technology.conf' )


# MOSIS SCN6M_DEEP is a portable technology where lengths are expresseds
# in symbolic unit (lambda). We only know that the lambda is equal to half
# the value of the technology, that is 180nm gives 90nm. We have no information
# about the foundry grid.
#
# We set the foundry grid to .005um and set the gridsPerLambda to 18.

technoConfig = { 'name'          : 'scn6m_deep'
               , 'gridValue'     : 0.005
               , 'gridUnit'      : DbU.UnitPowerMicro
               , 'gridsPerLambda': 18
               }


# Format of <symbolicRulesTable>:
#    Each entry is a pair of (string, value).
#    * string: a synthetic way to designate the symbolic layer on which
#              it applies, an optional real layer in case where there is
#              more than one, and the dimension name.
#    * value : the rule (dimension) value expressed in lambda.

symbolicRulesTable = \
    ( ('NWELL.nWell.extention.cap'          ,  4.0)
    , ('PWELL.pWell.extention.cap'          ,  4.0)

    , ('NTIE.minimum.width'                 ,  3.0)
    , ('NTIE.nWell.extention.cap'           ,  3.0)
    , ('NTIE.nWell.extention.width'         ,  2.0)
    , ('NTIE.nImplant.extention.cap'        ,  2.5)
    , ('NTIE.nImplant.extention.width'      ,  1.5)
    , ('NTIE.active.extention.cap'          ,  0.5)
    , ('NTIE.active.extention.width'        , -0.5)

    , ('PTIE.minimum.width'                 ,  3.0)
    , ('PTIE.pWell.extention.cap'           ,  3.0)
    , ('PTIE.pWell.extention.width'         ,  2.0)
    , ('PTIE.pImplant.extention.cap'        ,  2.5)
    , ('PTIE.pImplant.extention.width'      ,  1.5)
    , ('PTIE.active.extention.cap'          ,  0.5)
    , ('PTIE.active.extention.width'        , -0.5)

    , ('NDIF.minimum.width'                 ,  3.0)
    , ('NDIF.nImplant.extention.cap'        ,  4.0)
    , ('NDIF.nImplant.extention.width'      ,  2.0)
    , ('NDIF.active.extention.cap'          ,  2.0)
    , ('NDIF.active.extention.width'        ,  0.0)

    , ('PDIF.minimum.width'                 ,  3.0)
    , ('PDIF.pImplant.extention.cap'        ,  4.0)
    , ('PDIF.pImplant.extention.width'      ,  2.0)
    , ('PDIF.active.extention.cap'          ,  2.0)
    , ('PDIF.active.extention.width'        ,  0.0)

    , ('GATE.minimum.width'                 ,  2.0)
    , ('GATE.poly.extention.cap'            ,  2.5)

    , ('NTRANS.minimum.width'               ,  2.0)
    , ('NTRANS.nImplant.extention.cap'      ,  2.0)
    , ('NTRANS.nImplant.extention.width'    ,  7.0)
    , ('NTRANS.active.extention.cap'        ,  0.0)
    , ('NTRANS.active.extention.width'      ,  3.0)
    , ('NTRANS.poly.extention.cap'          ,  3.0)
    , ('NTRANS.poly.extention.width'        ,  0.0)

    , ('PTRANS.minimum.width'               ,  2.0)
    , ('PTRANS.nWell.extention.cap'         ,  2.5)
    , ('PTRANS.nWell.extention.width'       ,  7.5)
    , ('PTRANS.pImplant.extention.cap'      ,  2.0)
    , ('PTRANS.pImplant.extention.width'    ,  7.0)
    , ('PTRANS.active.extention.cap'        ,  0.0)
    , ('PTRANS.active.extention.width'      ,  3.0)
    , ('PTRANS.poly.extention.cap'          ,  3.0)
    , ('PTRANS.poly.extention.width'        ,  0.0)

    , ('POLY.minimum.width'                 ,  2.0)
    , ('POLY.poly.extention.cap'            ,  1.0)
    , ('POLY2.minimum.width'                ,  2.0)
    , ('POLY2.poly2.extention.cap'          ,  2.0)

    # Routing Layers.
    , ('METAL1.minimum.width'               ,  2.0)
    , ('METAL1.metal1.extention.cap'        ,  2.0)
    , ('METAL1.metal1.extention.width'      ,  0.5)
    , ('METAL2.minimum.width'               ,  3.0)
    , ('METAL2.metal2.extention.cap'        ,  1.5)
    , ('METAL3.minimum.width'               ,  3.0)
    , ('METAL3.metal3.extention.cap'        ,  1.5)
    , ('METAL4.minimum.width'               ,  3.0)
    , ('METAL4.metal4.extention.cap'        ,  1.5)
    , ('METAL5.minimum.width'               ,  3.0)
    , ('METAL5.metal5.extention.cap'        ,  1.5)
    , ('METAL6.minimum.width'               ,  5.0)
    , ('METAL6.metal6.extention.cap'        ,  2.5)
   #, ('METAL7.minimum.width'               ,  2.0)
   #, ('METAL7.metal7.extention.cap'        ,  2.5)
   #, ('METAL8.minimum.width'               ,  2.0)
   #, ('METAL8.metal8.extention.cap'        ,  2.5)

    # Blockages.
    , ('BLOCKAGE1.minimum.width'            ,  3.0)
    , ('BLOCKAGE1.blockage1.extention.cap'  ,  2.0)
    , ('BLOCKAGE1.blockage1.extention.width',  0.5)
    , ('BLOCKAGE2.minimum.width'            ,  3.0)
    , ('BLOCKAGE2.blockage2.extention.cap'  ,  2.0)
    , ('BLOCKAGE3.minimum.width'            ,  3.0)
    , ('BLOCKAGE3.blockage3.extention.cap'  ,  2.0)
    , ('BLOCKAGE4.minimum.width'            ,  3.0)
    , ('BLOCKAGE4.blockage4.extention.cap'  ,  2.0)
    , ('BLOCKAGE5.minimum.width'            ,  3.0)
    , ('BLOCKAGE5.blockage5.extention.cap'  ,  2.0)
    , ('BLOCKAGE6.minimum.width'            ,  4.0)
    , ('BLOCKAGE6.blockage6.extention.cap'  ,  2.5)
   #, ('BLOCKAGE7.minimum.width'            ,  2.0)
   #, ('BLOCKAGE7.blockage6.extention.cap'  ,  4.0)
   #, ('BLOCKAGE8.minimum.width'            ,  2.0)
   #, ('BLOCKAGE8.blockage6.extention.cap'  ,  4.0)

    # Contacts (i.e. Active <--> Metal).
    , ('CONT_BODY_N.minimum.side'           ,  2.0)
    , ('CONT_BODY_N.nWell.enclosure'        ,  4.0)
    , ('CONT_BODY_N.nImplant.enclosure'     ,  3.5)
    , ('CONT_BODY_N.active.enclosure'       ,  1.5)
    , ('CONT_BODY_N.metal1.enclosure'       ,  1.0)

    , ('CONT_BODY_P.minimum.side'           ,  2.0)
    , ('CONT_BODY_P.pWell.enclosure'        ,  4.0)
    , ('CONT_BODY_P.pImplant.enclosure'     ,  3.5)
    , ('CONT_BODY_P.active.enclosure'       ,  1.5)
    , ('CONT_BODY_P.metal1.enclosure'       ,  1.0)

    , ('CONT_DIF_N.minimum.side'            ,  2.0)
    , ('CONT_DIF_N.nImplant.enclosure'      ,  4.0)
    , ('CONT_DIF_N.active.enclosure'        ,  2.0)
    , ('CONT_DIF_N.metal1.enclosure'        ,  1.0)

    , ('CONT_DIF_P.minimum.side'            ,  2.0)
    , ('CONT_DIF_P.pImplant.enclosure'      ,  4.0)
    , ('CONT_DIF_P.active.enclosure'        ,  2.0)
    , ('CONT_DIF_P.metal1.enclosure'        ,  1.0)

    , ('CONT_POLY.minimum.width'            ,  2.0)
    , ('CONT_POLY.poly.enclosure'           ,  2.0)
    , ('CONT_POLY.metal1.enclosure'         ,  1.0)

    # VIAs (i.e. Metal <--> Metal).
    , ('VIA12.minimum.side'                 ,  3.0)
    , ('VIA12.metal1.enclosure'             ,  1.0)
    , ('VIA12.metal2.enclosure'             ,  1.0)
    , ('VIA23.minimum.side'                 ,  3.0)
    , ('VIA23.metal2.enclosure'             ,  1.0)
    , ('VIA23.metal3.enclosure'             ,  1.0)
    , ('VIA34.minimum.side'                 ,  3.0)
    , ('VIA34.metal3.enclosure'             ,  1.0)
    , ('VIA34.metal4.enclosure'             ,  1.0)
    , ('VIA45.minimum.side'                 ,  3.0)
    , ('VIA45.metal4.enclosure'             ,  1.0)
    , ('VIA45.metal5.enclosure'             ,  1.0)
    , ('VIA56.minimum.side'                 ,  5.0)
    , ('VIA56.metal5.enclosure'             ,  1.0)
    , ('VIA56.metal6.enclosure'             ,  1.5)
   #, ('VIA67.minimum.side'                 ,  2.0)
   #, ('VIA67.metal6.enclosure'             ,  3.0)
   #, ('VIA67.metal7.enclosure'             ,  3.0)
   #, ('VIA78.minimum.side'                 ,  2.0)
   #, ('VIA78.metal7.enclosure'             ,  3.0)
   #, ('VIA78.metal8.enclosure'             ,  3.0)
    )


# Format of an entry in the table:
#     (Symbolic_Name, CIF_Name, GDSII_Number)
gdsLayersTable = \
    ( ("pWell"   , "CWN"    , 41)
    , ("nWell"   , "CWP"    , 42)
    , ("active"  , "CAA"    , 43)
    , ("pImplant", "CSP"    , 44)
    , ("nImplant", "CSN"    , 45)
    , ("poly"    , "CPG"    , 46)
    , ("poly2"   , "CM1"    , 49)  # poly2 is in fact metal1.
    , ("cut0"    , "CCC"    , 25)
    , ("metal1"  , "CM1"    , 49)
    , ("cut1"    , "CV1"    , 50)
    , ("metal2"  , "CM2"    , 51)
    , ("cut2"    , "CV2"    , 61)
    , ("metal3"  , "CM3"    , 62)
    , ("cut3"    , "CV3"    , 30)
    , ("metal4"  , "CM4"    , 31)
    , ("cut4"    , "CV4"    , 32)
    , ("metal5"  , "CM5"    , 33)
    , ("cut5"    , "CV5"    , 36)
    , ("metal6"  , "CM6"    , 37)
    )
