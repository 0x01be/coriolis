\hypertarget{classHurricane_1_1JsonStack}{\section{Hurricane\-:\-:Json\-Stack Class Reference}
\label{classHurricane_1_1JsonStack}\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}}
}


J\-S\-O\-N Parser Stack.  


\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
size\-\_\-t \hyperlink{classHurricane_1_1JsonStack_a128c942ff7e6b770f20e59ce48ff05c7}{size} () const 
\item 
{\footnotesize template$<$typename T $>$ }\\void \hyperlink{classHurricane_1_1JsonStack_a189a4e74a62f898f5fe903a185181bc5}{push\-\_\-back} (const std\-::string \&, T)
\item 
void \hyperlink{classHurricane_1_1JsonStack_a668d3c1974efefb6ced90544b4703fe5}{pop\-\_\-back} (size\-\_\-t count=1)
\item 
int \hyperlink{classHurricane_1_1JsonStack_ae22c33da9704685d83d75cc60785b854}{rhas} (const std\-::string \&) const 
\item 
{\footnotesize template$<$typename T $>$ }\\T \hyperlink{classHurricane_1_1JsonStack_aa3a3fa85dad02927dbadf4a3a76d4c83}{as} (const std\-::string \&) const 
\item 
{\footnotesize template$<$typename T $>$ }\\T \hyperlink{classHurricane_1_1JsonStack_aeaf19ea9cd61ed14ed303c4ab43fd150}{as} (int) const 
\item 
void \hyperlink{classHurricane_1_1JsonStack_ab949c42fe63dcaad6a8e23954167a9a7}{push\-\_\-back\-\_\-dbo} (\hyperlink{classHurricane_1_1DBo}{D\-Bo} $\ast$)
\item 
void \hyperlink{classHurricane_1_1JsonStack_adeeb2a0300fa248f1f3bff38c4095630}{pop\-\_\-back\-\_\-dbo} ()
\item 
\hyperlink{classHurricane_1_1DBo}{D\-Bo} $\ast$ \hyperlink{classHurricane_1_1JsonStack_a5c607d8abb075f4c0ac2990a26b28b78}{back\-\_\-dbo} () const 
\item 
vector$<$ \hyperlink{classHurricane_1_1JsonObject}{Json\-Object} $\ast$ $>$ \& \hyperlink{classHurricane_1_1JsonStack_a974ee9daf5dbf861ed50cae0a51a5cbb}{jobjects} ()
\item 
{\footnotesize template$<$typename T $>$ }\\T \hyperlink{classHurricane_1_1JsonStack_a2113cc70527e6695d8cf11bcefd0b679}{get\-Entity} (unsigned int) const 
\item 
void \hyperlink{classHurricane_1_1JsonStack_a421fdf4a3bab01d75f0aab292cc574d0}{add\-Entity} (unsigned int json\-Id, \hyperlink{classHurricane_1_1Entity}{Entity} $\ast$)
\item 
void \hyperlink{classHurricane_1_1JsonStack_a499df92d9e40e41c8bf145b41753cbc8}{print} (std\-::ostream \&) const 
\end{DoxyCompactItemize}


\subsection{Detailed Description}
J\-S\-O\-N Parser Stack. 

The J\-S\-O\-N parser stack contains three separate stacks and a lookup table\-:
\begin{DoxyEnumerate}
\item The {\ttfamily attribute} stack. Objects that have been translated from J\-S\-O\-N to the \hyperlink{namespaceHurricane}{Hurricane} database (or P\-O\-D objects).
\item The {\ttfamily dbo} stack, similar to the previous one, but contains {\bfseries only} objects whose base class is \hyperlink{classHurricane_1_1DBo}{D\-Bo}.
\item The \hyperlink{classHurricane_1_1JsonObject}{Json\-Object} stack. The stack of objects currently under parsing.
\item A lookup table for the \hyperlink{classHurricane_1_1Entity}{Entity}, between the \hyperlink{namespaceHurricane}{Hurricane} {\ttfamily id} and the J\-S\-O\-N {\ttfamily id}. 
\end{DoxyEnumerate}

\subsection{Member Function Documentation}
\hypertarget{classHurricane_1_1JsonStack_a128c942ff7e6b770f20e59ce48ff05c7}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!size@{size}}
\index{size@{size}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{size}]{\setlength{\rightskip}{0pt plus 5cm}size\-\_\-t Hurricane\-::\-Json\-Stack\-::size (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a128c942ff7e6b770f20e59ce48ff05c7}
{\bfseries Returns\-:} The size of the attribute stack. \hypertarget{classHurricane_1_1JsonStack_a189a4e74a62f898f5fe903a185181bc5}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!push\-\_\-back@{push\-\_\-back}}
\index{push\-\_\-back@{push\-\_\-back}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{push\-\_\-back}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ void Hurricane\-::\-Json\-Stack\-::push\-\_\-back (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{key, }
\item[{T}]{hobject}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a189a4e74a62f898f5fe903a185181bc5}

\begin{DoxyParams}{Parameters}
{\em key} & Key associated to {\ttfamily hobject} \\
\hline
{\em hobject} & The {\itshape attribute} object.\\
\hline
\end{DoxyParams}
Push back (on top) an element on the {\itshape attribute} stack. 

References Hurricane\-::demangle().



Referenced by Hurricane\-::\-Json\-Object\-::update().

\hypertarget{classHurricane_1_1JsonStack_a668d3c1974efefb6ced90544b4703fe5}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!pop\-\_\-back@{pop\-\_\-back}}
\index{pop\-\_\-back@{pop\-\_\-back}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{pop\-\_\-back}]{\setlength{\rightskip}{0pt plus 5cm}void Hurricane\-::\-Json\-Stack\-::pop\-\_\-back (
\begin{DoxyParamCaption}
\item[{size\-\_\-t}]{count = {\ttfamily 1}}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a668d3c1974efefb6ced90544b4703fe5}

\begin{DoxyParams}{Parameters}
{\em count} & The number of element to pop.\\
\hline
\end{DoxyParams}
Remove {\ttfamily count} element(s) from the top of the stack. 

Referenced by Hurricane\-::\-Json\-Object\-::update().

\hypertarget{classHurricane_1_1JsonStack_ae22c33da9704685d83d75cc60785b854}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!rhas@{rhas}}
\index{rhas@{rhas}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{rhas}]{\setlength{\rightskip}{0pt plus 5cm}int Hurricane\-::\-Json\-Stack\-::rhas (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{key}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_ae22c33da9704685d83d75cc60785b854}

\begin{DoxyParams}{Parameters}
{\em key} & The key element's to look for. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the index of the element, from the top.
\end{DoxyReturn}
The function name's stands for \char`\"{}\-Reverse H\-A\-S\char`\"{}. Search from the top of the {\itshape attribute} stack downward an element with {\ttfamily key}. Return an index from the top of the stack, that is, the end of the vector. The returned index is a negative value, for exemple the element on top of the stack has an index of {\ttfamily -\/1}. If no element with a matching key is found, returns 0. 

References Hurricane\-::demangle().



Referenced by Hurricane\-::\-Json\-Object\-::get().

\hypertarget{classHurricane_1_1JsonStack_aa3a3fa85dad02927dbadf4a3a76d4c83}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!as@{as}}
\index{as@{as}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{as}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ T Hurricane\-::\-Json\-Stack\-::as (
\begin{DoxyParamCaption}
\item[{const std\-::string \&}]{key}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_aa3a3fa85dad02927dbadf4a3a76d4c83}

\begin{DoxyParams}{Parameters}
{\em key} & The key's element to search. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The element, casted as type T.
\end{DoxyReturn}
Search an element with key matching {\ttfamily key}, from the top of the stack. If found, returns the element casted as type {\ttfamily T}. As the cast operation uses {\ttfamily boost\-::any\-\_\-cast$<$$>$}, the exact type {\ttfamily T} must be used ({\bfseries not} a base class of {\ttfamily T}), otherwise the cast will fail and an exception will be thrown. 

References Hurricane\-::demangle().



Referenced by Hurricane\-::\-Json\-Object\-::get().

\hypertarget{classHurricane_1_1JsonStack_aeaf19ea9cd61ed14ed303c4ab43fd150}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!as@{as}}
\index{as@{as}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{as}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ T Hurricane\-::\-Json\-Stack\-::as (
\begin{DoxyParamCaption}
\item[{int}]{index}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_aeaf19ea9cd61ed14ed303c4ab43fd150}

\begin{DoxyParams}{Parameters}
{\em index} & the position of the element to convert. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
The element, casted as type T.
\end{DoxyReturn}
Cast the element at {\ttfamily index} into type T. As the cast operation uses {\ttfamily boost\-::any\-\_\-cast$<$$>$}, the exact type {\ttfamily T} must be used ({\bfseries not} a base class of {\ttfamily T}), otherwise the cast will fail and an exception will be thrown.

A positive or null index means the element must be taken from the bottom of the stack and a stictly negative one means from the top of the stack. \hypertarget{classHurricane_1_1JsonStack_ab949c42fe63dcaad6a8e23954167a9a7}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!push\-\_\-back\-\_\-dbo@{push\-\_\-back\-\_\-dbo}}
\index{push\-\_\-back\-\_\-dbo@{push\-\_\-back\-\_\-dbo}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{push\-\_\-back\-\_\-dbo}]{\setlength{\rightskip}{0pt plus 5cm}void Hurricane\-::\-Json\-Stack\-::push\-\_\-back\-\_\-dbo (
\begin{DoxyParamCaption}
\item[{{\bf D\-Bo} $\ast$}]{dbo}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_ab949c42fe63dcaad6a8e23954167a9a7}

\begin{DoxyParams}{Parameters}
{\em dbo} & The \hyperlink{classHurricane_1_1DataBase}{Data\-Base} object to push back.\\
\hline
\end{DoxyParams}
Dedicated stack to push objects {\itshape after} they had been casted into the D\-Bo$\ast$ base class. We need to create this separate stack from the {\itshape attribute} stack due to the inability of {\ttfamily boost\-::any\-\_\-cast$<$$>$} to use a base class. \hypertarget{classHurricane_1_1JsonStack_adeeb2a0300fa248f1f3bff38c4095630}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!pop\-\_\-back\-\_\-dbo@{pop\-\_\-back\-\_\-dbo}}
\index{pop\-\_\-back\-\_\-dbo@{pop\-\_\-back\-\_\-dbo}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{pop\-\_\-back\-\_\-dbo}]{\setlength{\rightskip}{0pt plus 5cm}void Hurricane\-::\-Json\-Stack\-::pop\-\_\-back\-\_\-dbo (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_adeeb2a0300fa248f1f3bff38c4095630}
Remove one element from the top of the D\-Bo$\ast$ stack. \hypertarget{classHurricane_1_1JsonStack_a5c607d8abb075f4c0ac2990a26b28b78}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!back\-\_\-dbo@{back\-\_\-dbo}}
\index{back\-\_\-dbo@{back\-\_\-dbo}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{back\-\_\-dbo}]{\setlength{\rightskip}{0pt plus 5cm}{\bf D\-Bo} $\ast$ Hurricane\-::\-Json\-Stack\-::back\-\_\-dbo (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a5c607d8abb075f4c0ac2990a26b28b78}
{\bfseries Returns\-:} The elemet at the top of the D\-Bo$\ast$ stack. \hypertarget{classHurricane_1_1JsonStack_a974ee9daf5dbf861ed50cae0a51a5cbb}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!jobjects@{jobjects}}
\index{jobjects@{jobjects}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{jobjects}]{\setlength{\rightskip}{0pt plus 5cm}vector$<$ {\bf Json\-Object} $\ast$ $>$ \& Hurricane\-::\-Json\-Stack\-::jobjects (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a974ee9daf5dbf861ed50cae0a51a5cbb}
{\bfseries Returns\-:} the stack of J\-S\-O\-N objects, for direct manipulation by the involded parties. 

Referenced by Hurricane\-::\-Json\-Object\-::jget().

\hypertarget{classHurricane_1_1JsonStack_a2113cc70527e6695d8cf11bcefd0b679}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!get\-Entity@{get\-Entity}}
\index{get\-Entity@{get\-Entity}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{get\-Entity}]{\setlength{\rightskip}{0pt plus 5cm}template$<$typename T $>$ T Hurricane\-::\-Json\-Stack\-::get\-Entity (
\begin{DoxyParamCaption}
\item[{unsigned int}]{json\-Id}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classHurricane_1_1JsonStack_a2113cc70527e6695d8cf11bcefd0b679}
{\bfseries Returns\-:} The entity, casted as type {\ttfamily T}.

Find an \hyperlink{classHurricane_1_1Entity}{Entity} with the J\-S\-O\-N id {\ttfamily json\-Id} and cast it into type {\ttfamily T}.

Obviously, this \hyperlink{classHurricane_1_1Entity}{Entity} must have been registered with a call to \hyperlink{classHurricane_1_1JsonStack_a421fdf4a3bab01d75f0aab292cc574d0}{add\-Entity()} before. \hypertarget{classHurricane_1_1JsonStack_a421fdf4a3bab01d75f0aab292cc574d0}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!add\-Entity@{add\-Entity}}
\index{add\-Entity@{add\-Entity}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{add\-Entity}]{\setlength{\rightskip}{0pt plus 5cm}void Hurricane\-::\-Json\-Stack\-::add\-Entity (
\begin{DoxyParamCaption}
\item[{unsigned int}]{json\-Id, }
\item[{{\bf Entity} $\ast$}]{entity}
\end{DoxyParamCaption}
)}}\label{classHurricane_1_1JsonStack_a421fdf4a3bab01d75f0aab292cc574d0}

\begin{DoxyParams}{Parameters}
{\em json\-Id} & the {\ttfamily id} of the \hyperlink{classHurricane_1_1Entity}{Entity}, in the J\-S\-O\-N file \\
\hline
{\em entity} & the associated \hyperlink{classHurricane_1_1Entity}{Entity}.\\
\hline
\end{DoxyParams}
When parsing a \hyperlink{classHurricane_1_1DataBase}{Data\-Base} object {\bfseries not} in {\itshape blob} mode, we cannot restore the ids of the Entities as they are in the file. Thus when an \hyperlink{classHurricane_1_1Entity}{Entity} is re-\/created, it comes with a different id. So we have to keep track of the association between this newbox id (in the \hyperlink{namespaceHurricane}{Hurricane} database) and the one in the J\-S\-O\-N file.

This function adds such an association. \hypertarget{classHurricane_1_1JsonStack_a499df92d9e40e41c8bf145b41753cbc8}{\index{Hurricane\-::\-Json\-Stack@{Hurricane\-::\-Json\-Stack}!print@{print}}
\index{print@{print}!Hurricane::JsonStack@{Hurricane\-::\-Json\-Stack}}
\subsubsection[{print}]{\setlength{\rightskip}{0pt plus 5cm}void Hurricane\-::\-Json\-Stack\-::print (
\begin{DoxyParamCaption}
\item[{std\-::ostream \&}]{o}
\end{DoxyParamCaption}
) const}}\label{classHurricane_1_1JsonStack_a499df92d9e40e41c8bf145b41753cbc8}
Dump the contents of the {\itshape attribute} stack int the stream {\ttfamily o}. For debugging purposes. 

The documentation for this class was generated from the following files\-:\begin{DoxyCompactItemize}
\item 
Json\-Object.\-h\item 
Json\-Object.\-dox\end{DoxyCompactItemize}
